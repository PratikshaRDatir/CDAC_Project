{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import'./BookList.css';// Import the custom CSS file for styling\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function BookList(){const[books,setBooks]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[selectedBookId,setSelectedBookId]=useState('');const[quantity,setQuantity]=useState(1);const{userId}=useParams();// Assume userId is passed as a URL parameter\nuseEffect(()=>{// Fetch available books\naxios.get('/books').then(response=>setBooks(response.data)).catch(error=>console.error('Error fetching books:',error));},[]);const handleAddToCart=async e=>{e.preventDefault();try{await axios.post(`/carts/${userId}/books/${selectedBookId}`,null,{params:{quantity:quantity}});alert('Book added to cart successfully!');}catch(error){console.error('Error adding book to cart:',error);alert('Error adding book to cart.');}};useEffect(()=>{axios.get('http://localhost:8080/books').then(response=>{setBooks(response.data);setLoading(false);}).catch(error=>{setError(error);setLoading(false);console.error('Error fetching books:',error);});},[]);if(loading){return/*#__PURE__*/_jsx(\"p\",{children:\"Loading books...\"});}if(error){return/*#__PURE__*/_jsxs(\"p\",{children:[\"Error fetching books: \",error.message]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"book-list\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"All Books\"}),/*#__PURE__*/_jsx(\"div\",{className:\"book-container\",children:books.map(book=>/*#__PURE__*/_jsxs(\"div\",{className:\"book-card\",children:[/*#__PURE__*/_jsx(\"img\",{src:book.imageUrl?book.imageUrl:'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRtTwTX073b4hbLtn-DxvVvliCUsxbx2hYXnQ&s',alt:book.bookName,className:\"book-image\"}),/*#__PURE__*/_jsx(\"h3\",{children:book.bookName}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Author:\"}),\" \",book.author]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price:\"}),\" $\",book.price]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Category:\"}),\" \",book.category]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Available Quantity:\"}),\" \",book.availableQty]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Publisher:\"}),\" \",book.publisher]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Published On:\"}),\" \",new Date(book.publishedOn).toLocaleDateString()]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddToCart(book),children:\"Add to Cart\"})]},book.bookId))})]});}export default BookList;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","BookList","books","setBooks","loading","setLoading","error","setError","selectedBookId","setSelectedBookId","quantity","setQuantity","userId","useParams","get","then","response","data","catch","console","handleAddToCart","e","preventDefault","post","params","alert","children","message","className","map","book","src","imageUrl","alt","bookName","author","price","category","availableQty","publisher","Date","publishedOn","toLocaleDateString","onClick","bookId"],"sources":["D:/CDAC/CDAC_Project/thebookshelf-frontend/src/components/BookList.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport './BookList.css'; // Import the custom CSS file for styling\r\n\r\nfunction BookList() {\r\n  const [books, setBooks] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);   \r\n    const [selectedBookId, setSelectedBookId] = useState('');\r\n    const [quantity, setQuantity] = useState(1);\r\n    const { userId } = useParams(); // Assume userId is passed as a URL parameter\r\n  \r\n    useEffect(() => {\r\n      // Fetch available books\r\n      axios.get('/books')\r\n        .then(response => setBooks(response.data))\r\n        .catch(error => console.error('Error fetching books:', error));\r\n    }, []);\r\n  \r\n    const handleAddToCart = async (e) => {\r\n      e.preventDefault();\r\n      try {\r\n        await axios.post(`/carts/${userId}/books/${selectedBookId}`, null, {\r\n          params: {\r\n            quantity: quantity,\r\n          },\r\n        });\r\n        alert('Book added to cart successfully!');\r\n      } catch (error) {\r\n        console.error('Error adding book to cart:', error);\r\n        alert('Error adding book to cart.');\r\n      }\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n  useEffect(() => {\r\n    axios.get('http://localhost:8080/books')\r\n      .then(response => {\r\n        setBooks(response.data);\r\n        setLoading(false);\r\n      })\r\n      .catch(error => {\r\n        setError(error);\r\n        setLoading(false);\r\n        console.error('Error fetching books:', error);\r\n      });\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return <p>Loading books...</p>;\r\n  }\r\n\r\n  if (error) {\r\n    return <p>Error fetching books: {error.message}</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"book-list\">\r\n      <h2>All Books</h2>\r\n      <div className=\"book-container\">\r\n        {books.map(book => (\r\n          <div className=\"book-card\" key={book.bookId}>\r\n            <img\r\n              src={book.imageUrl ? book.imageUrl : 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRtTwTX073b4hbLtn-DxvVvliCUsxbx2hYXnQ&s'} \r\n              alt={book.bookName}\r\n              className=\"book-image\"\r\n            />\r\n            <h3>{book.bookName}</h3>\r\n            <p><strong>Author:</strong> {book.author}</p>\r\n            <p><strong>Price:</strong> ${book.price}</p>\r\n            <p><strong>Category:</strong> {book.category}</p>\r\n            <p><strong>Available Quantity:</strong> {book.availableQty}</p>\r\n            <p><strong>Publisher:</strong> {book.publisher}</p>\r\n            <p><strong>Published On:</strong> {new Date(book.publishedOn).toLocaleDateString()}</p>\r\n            <button onClick={() => handleAddToCart(book)}>Add to Cart</button>\r\n            \r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BookList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}