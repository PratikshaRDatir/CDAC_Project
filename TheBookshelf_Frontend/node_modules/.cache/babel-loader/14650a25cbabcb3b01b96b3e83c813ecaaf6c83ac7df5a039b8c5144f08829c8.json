{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import'bootstrap/dist/css/bootstrap.min.css';import'./LoginPage.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[role,setRole]=useState('CUSTOMER');const[error,setError]=useState(null);const navigate=useNavigate();const handleLogin=async e=>{e.preventDefault();try{const response=await axios.post('http://localhost:8080/users/login',null,{params:{email,password,role}});if(response.status===200){const{redirectUrl}=response.data;if(redirectUrl){navigate(redirectUrl);}else{setError('Unexpected response from server.');}}}catch(err){setError('Login failed. Please check your credentials.');console.error('Login error:',err);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",className:\"form-control\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",className:\"form-control\",value:password,onChange:e=>setPassword(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"role\",children:\"Role:\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"role\",className:\"form-control\",value:role,onChange:e=>setRole(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"CUSTOMER\",children:\"Customer\"}),/*#__PURE__*/_jsx(\"option\",{value:\"ADMIN\",children:\"Admin\"})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Login\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger mt-2\",children:error})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/register\",className:\"btn btn-secondary\",children:\"New to The Bookshelf? Register\"})})]});}export default Login;","map":{"version":3,"names":["React","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Login","email","setEmail","password","setPassword","role","setRole","error","setError","navigate","handleLogin","e","preventDefault","response","post","params","status","redirectUrl","data","err","console","className","children","onSubmit","htmlFor","type","id","value","onChange","target","required","href"],"sources":["D:/CDAC/CDAC_Project/thebookshelf-frontend/src/components/LoginPage.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport './LoginPage.css';\r\n\r\nfunction Login() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [role, setRole] = useState('CUSTOMER');\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  const handleLogin = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await axios.post('http://localhost:8080/users/login', null, {\r\n        params: { email, password, role }\r\n      });\r\n\r\n      if (response.status === 200) {\r\n        const { redirectUrl } = response.data;\r\n        if (redirectUrl) {\r\n          navigate(redirectUrl);\r\n        } else {\r\n          setError('Unexpected response from server.');\r\n        }\r\n      }\r\n    } catch (err) {\r\n      setError('Login failed. Please check your credentials.');\r\n      console.error('Login error:', err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-container\">\r\n      <h2>Login</h2>\r\n      <form onSubmit={handleLogin}>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"email\">Email:</label>\r\n          <input\r\n            type=\"email\"\r\n            id=\"email\"\r\n            className=\"form-control\"\r\n            value={email}\r\n            onChange={(e) => setEmail(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"password\">Password:</label>\r\n          <input\r\n            type=\"password\"\r\n            id=\"password\"\r\n            className=\"form-control\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            required\r\n          />\r\n        </div>\r\n        <div className=\"form-group\">\r\n          <label htmlFor=\"role\">Role:</label>\r\n          <select\r\n            id=\"role\"\r\n            className=\"form-control\"\r\n            value={role}\r\n            onChange={(e) => setRole(e.target.value)}\r\n          >\r\n            <option value=\"CUSTOMER\">Customer</option>\r\n            <option value=\"ADMIN\">Admin</option>\r\n          </select>\r\n        </div>\r\n        <button type=\"submit\" className=\"btn btn-primary\">Login</button>\r\n        {error && <p className=\"text-danger mt-2\">{error}</p>}\r\n      </form>\r\n      <div className=\"mt-3\">\r\n        <a href=\"/register\" className=\"btn btn-secondary\">New to The Bookshelf? Register</a>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}